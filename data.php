<?php

    require_once('PointInPolygon.php');

    $point = json_decode($_POST['point'], true);

    // define regions
    $west = '[{"x":6.876609314378934,"y":47.18022834134132},{"x":6.887732662218537,"y":47.115246882046996},{"x":7.05458287981258,"y":47.14773761169416},{"x":7.099076271170992,"y":47.099001517223414},{"x":7.05458287981258,"y":47.001529328281926},{"x":7.24367979308583,"y":47.03402005792909},{"x":7.221433097406624,"y":46.92030250416402},{"x":7.388283315000669,"y":46.87968909210507},{"x":7.3104198801234475,"y":46.725358126281044},{"x":7.421653358519476,"y":46.68474471422209},{"x":7.377159967161065,"y":46.64413130216314},{"x":7.32154322796305,"y":46.5872725252806},{"x":7.265926488765036,"y":46.54665911322165},{"x":7.254803140925433,"y":46.44918692428016},{"x":7.221433097406624,"y":46.35983741775046},{"x":7.265926488765036,"y":46.311101323279715},{"x":7.343789923642257,"y":46.351714735338675},{"x":7.455023402038286,"y":46.35983741775046},{"x":7.566256880434315,"y":46.35983741775046},{"x":7.6107502717927265,"y":46.39232814739763},{"x":7.677490358830344,"y":46.424818877044785},{"x":7.733107098028359,"y":46.38420546498583},{"x":7.866587272103594,"y":46.46543228910374},{"x":8.011190794018432,"y":46.52229106598627},{"x":8.122424272414461,"y":46.538536430809856},{"x":8.211411055131284,"y":46.4979230187509},{"x":8.400507968404535,"y":46.562904478045226},{"x":8.400507968404535,"y":46.611640572515974},{"x":8.400507968404535,"y":46.611640572515974},{"x":8.456124707602548,"y":46.64413130216314},{"x":8.445001359762946,"y":46.562904478045226},{"x":8.489494751121358,"y":46.4979230187509},{"x":8.456124707602548,"y":46.48167765392732},{"x":8.433878011923344,"y":46.44106424186837},{"x":8.411631316244137,"y":46.424818877044785},{"x":8.344891229206521,"y":46.34359205292688},{"x":8.23365775081049,"y":46.27048791122076},{"x":8.178041011612475,"y":46.24611986398539},{"x":8.222534402970886,"y":46.164893039867486},{"x":8.189164359452079,"y":46.09991158057316},{"x":8.089054228895652,"y":46.051175486102416},{"x":8.055684185376844,"y":45.9780713443963},{"x":7.944450706980815,"y":45.92933524992556},{"x":7.933327359141211,"y":45.86435379063123},{"x":7.755353793707565,"y":45.86435379063123},{"x":7.588503576113521,"y":45.913089885101975},{"x":7.455023402038286,"y":45.84810842580765},{"x":7.332666575802653,"y":45.823740378572275},{"x":7.099076271170992,"y":45.799372331336905},{"x":6.921102705737345,"y":45.99431670921988},{"x":6.820992575180918,"y":46.059298168514204},{"x":6.765375835982904,"y":46.140524992632116},{"x":6.809869227341316,"y":46.25424254639719},{"x":6.643019009747272,"y":46.27861059363256},{"x":6.342688618077993,"y":46.19738376951465},{"x":6.175838400483949,"y":46.09991158057316},{"x":5.953371443691891,"y":46.09178889816137},{"x":5.920001400173082,"y":46.20550645192644},{"x":6.053481574248317,"y":46.237997181573604},{"x":6.120221661285934,"y":46.34359205292688},{"x":6.020111530729508,"y":46.424818877044785},{"x":6.086851617767126,"y":46.538536430809856},{"x":6.053481574248317,"y":46.59539520769239},{"x":6.387182009436405,"y":46.78221690316358},{"x":6.387182009436405,"y":46.96091591622297},{"x":6.420552052955213,"y":47.00965201069372},{"x":6.665265705426478,"y":47.07463346998804},{"x":6.654142357586875,"y":47.13149224687058},{"x":6.832115923020522,"y":47.212719070988484}]';

    $regions = array(
        array(
            'index' => 1,
            'name' => 'west',
            'boundings' => json_decode($west, true)
        ),
        /*array(
            'name' => 'mittelland',
            'data' => json_decode($mittelland, true)
        ),*/
    );

    $targetRegion = array(
        'index' => 0,
        'name' => 'none'
    );

    for ($i = 0; $i < count($regions); $i++) {
        if (PointInPolygon::isPointInPolygon($regions[$i]['boundings'], $point) != -1) {
            unset($regions[$i]['boundings']);
            $targetRegion = $regions[$i];
            break;
        }
    }

    echo json_encode($targetRegion);

?>